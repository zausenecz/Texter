<!doctype html>

<html>

<head>
    <title>Texter</title>
    <meta lang="ru">
    <meta charset="utf-8">
    <link rel="stylesheet" href="style.css">

</head>

<body>

    <div id="preview">
        <p contenteditable="true" class="header" id="header1"></p>
        <p contenteditable="true" class="text" id="text1"></p>
        <br />
        <p contenteditable="true" class="header" id="header2"></p>
        <p contenteditable="true" class="text" id="text2"></p>
        <br />
        <p contenteditable="true" class="header" id="header3"></p>
        <p contenteditable="true" class="text" id="text3"></p>
        <br />

    </div>

    <div id="tools">

        <div class="inp">

            <textarea onclick="select('inp1')" spellcheck="false" class="inpText" id="inp1"></textarea>

            <button onclick="paste('inp1', 'header1')" class="button">Вставить</button>
            <button onclick="copy('header1')" class="button">Копировать</button>
            <button onclick="Clear('inp1')" class="button">Очистить</button>

        </div>

        <div class="inp">
            <textarea onclick="select('inp11')" spellcheck="false" class="inpText" id="inp11"></textarea>

            <button onclick="paste('inp11', 'text1')" class="button">Вставить</button>
            <button onclick="copy('text1')" class="button">Копировать</button>
            <button onclick="Clear('inp11')" class="button">Очистить</button>

        </div>
        <div class="inp">
            <button onclick="sub('c1')" class="button">-</button>
            <p id="c1" class="count">1</p>
            <button id="p1" onclick="add('c1')" class="button">+</button>
        </div>
        <br />

        <div class="inp">
            <textarea onclick="select('inp2')" spellcheck="false" class="inpText" id="inp2"></textarea>

            <button onclick="paste('inp2', 'header2')" class="button">Вставить</button>
            <button onclick="copy('header2')" class="button">Копировать</button>
            <button onclick="Clear('inp2')" class="button">Очистить</button>
        </div>

        <div class="inp">
            <textarea onclick="select('inp22')" spellcheck="false" class="inpText" id="inp22"></textarea>

            <button onclick="paste('inp22', 'text2')" class="button">Вставить</button>
            <button onclick="copy('text2')" class="button">Копировать</button>
            <button onclick="Clear('inp22')" class="button">Очистить</button>
        </div>
        <div class="inp">
            <button onclick="sub('c2')" class="button">-</button>
            <p id="c2" class="count">1</p>
            <button id="p2" onclick="add('c2')" class="button">+</button>
        </div>
        <br />

        <div class="inp">
            <textarea onclick="select('inp3')" spellcheck="false" class="inpText" id="inp3"></textarea>

            <button onclick="paste('inp3', 'header3')" class="button">Вставить</button>
            <button onclick="copy('header3')" class="button">Копировать</button>
            <button onclick="Clear('inp3')" class="button">Очистить</button>
        </div>

        <div class="inp">
            <textarea onclick="select('inp33')" spellcheck="false" class="inpText" id="inp33"></textarea>

            <button onclick="paste('inp33', 'text3')" class="button">Вставить</button>
            <button onclick="copy('text3')" class="button">Копировать</button>
            <button onclick="Clear('inp33')" class="button">Очистить</button>
        </div>
        <div class="inp">
            <button onclick="sub('c3')" class="button">-</button>
            <p id="c3" class="count">1</p>
            <button id="p3" onclick="add('c3')" class="button">+</button>
        </div>

<br />
        <select class="category" id="category" size="1">
            <option value="407">Диваны и кресла</option>
            <option value="408">Кровати и матрасы</option>
            <option value="413">Кухонные гарнитуры</option>
            <option value="411">Подставки и тумбы</option>
            <option value="410">Столы и стулья</option>
            <option value="409">Шкафы и комоды</option>
            <option value="401">Другое</option>
        </select>


        <input type="text" autocomplete="off" placeholder="Цена" id="price">
        <select class="category" id="streets" size="1">
            <option value="Россия, Казань, улица Татарстан">Татарстан</option>
            <option value="Россия, Казань, улица Юлиуса Фучика">Фучика</option>
            <option value="Россия, Казань">Россия, Казань</option>
            <option value="Россия, Казань">Россия, Казань</option>
            <option value="Россия, Казань">Россия, Казань</option>
            <option value="Россия, Казань">Россия, Казань</option>
            <option value="Россия, Казань">Россия, Казань</option>
        </select>
        <br />

        <br />



        <button onclick="createText()" class="buttonAll">Копировать всё</button>
        <button onclick="updateText()" class="buttonAll">Обновить всё</button>
        <button onclick="clearText()" id="clear" class="buttonAll">Очистить всё</button>
        

    </div>





    <script>
        var street = ["Россия, Казань, улица Восстания", "Россия, Казань, Проспект Победы", "Россия, Казань, Проспект Ямашева", "Россия, Казань, улица Чистопольская"];



        var alltxt = "";

        var categoryId = document.getElementById('category');
        var selectedOption = categoryId.options[categoryId.selectedIndex];

        var streetId = document.getElementById('streets');
        var selectedStreet = streetId.options[streetId.selectedIndex];

        function Rnd() {
            return Math.floor(Math.random() * 999999999);
        }

        function pluser() {
            var C1 = parseInt(document.getElementById('c1').innerHTML, 10);
            var C2 = parseInt(document.getElementById('c2').innerHTML, 10);
            var C3 = parseInt(document.getElementById('c3').innerHTML, 10);

            return C1 + C2 + C3;
        }

        function createText() {
            var cnt1 = parseInt(document.getElementById('c1').innerHTML, 10);

            var cnt2s = cnt1 + 1;
            var cnt2f = cnt2s + parseInt(document.getElementById('c2').innerHTML, 10) - 1;

            var cnt3s = cnt2f + 1;
            var cnt3f = cnt3s + parseInt(document.getElementById('c3').innerHTML, 10) - 1;
            alltxt = "";


            alltxt += '<offer id="' + Rnd() + '">\n';

            alltxt += '<youlaCategoryId>4</youlaCategoryId>\n';

            alltxt += '<youlaSubcategoryId>' + categoryId.options[categoryId.selectedIndex].value + '</youlaSubcategoryId>\n';

            alltxt += '<address>' + streetId.options[streetId.selectedIndex].value + ', ' + (3 + Math.floor(Math.random() * 70)) + '</address>\n';

            alltxt += '<price>' + document.getElementById('price').value + '</price>\n';

            alltxt += '<phone>8 953 999 90 00</phone>\n';

            alltxt += '<name>' + document.getElementById('header1').innerText + '</name>\n';

            alltxt += '<managerName>Марат</managerName>\n';

            for (i = 0; i < pluser(); i++) {
                alltxt += '<picture></picture>';
            }
            alltxt += '\n<description>\n';

            alltxt += '<![CDATA[ Нажмите на "Мафа мебель для дома" или на "Перейти в магазин" для просмотра всего ассортимента мебели нашего магазина\n';
            alltxt += 'Наши преимущества\n';
            alltxt += '1 Работаем в рассрочку 6 месяцев без первоначального взноса\n';
            alltxt += '2 Скидки для молодожёнов, новосёлов, пенсионеров и другие интересные акций\n';
            alltxt += '3 Широкий модельный ряд более 1000 наименований\n';
            alltxt += '4 Принимаем банковские карты. Безналичный расчёт\n';
            alltxt += '5 Есть доставка, подъем, сборка\n';
            alltxt += '6 Гарантия на мебель\n';
            alltxt += '7 Возможность оформления заказа дистанционно\n';
            alltxt += '8 Индивидуальный подход к каждому покупателю\n';
            alltxt += '9 Изготовление мебели по индивидуальным размерам\n';
            alltxt += '__________________________________________________________\n';

            if (parseInt(document.getElementById('c1').innerHTML, 10) != 1)
                alltxt += document.getElementById('header1').innerText + " (фото 1-" + cnt1 + ")" + "\n";
            else alltxt += document.getElementById('header1').innerText + " (фото 1)" + "\n";
            alltxt += document.getElementById('text1').innerText + "\n\n";

            if (parseInt(document.getElementById('c2').innerHTML, 10) != 1)
                alltxt += document.getElementById('header2').innerText + " (фото " + cnt2s + "-" + cnt2f + ")" + "\n";
            else alltxt += document.getElementById('header2').innerText + " (фото " + cnt2s + ")" + "\n";
            alltxt += document.getElementById('text2').innerText + "\n\n";


            if (parseInt(document.getElementById('c3').innerHTML, 10) != 1)
                alltxt += document.getElementById('header3').innerText + " (фото " + cnt3s + "-" + cnt3f + ")" + "\n";
            else alltxt += document.getElementById('header3').innerText + " (фото " + cnt3s + ")" + "\n";
            alltxt += document.getElementById('text3').innerText + "\n";

            alltxt += '__________________________________________________________\n';
            alltxt += 'Ждем ваших звонков! ]]>\n';

            alltxt += '</description>\n';

            alltxt += '</offer>\n';


            const str = alltxt;
            const el = document.createElement('textarea');
            el.value = str;
            document.body.appendChild(el);
            el.select();
            document.execCommand('copy');
            document.body.removeChild(el);
        }

        function copy(txt) {
            const str = document.getElementById(txt).innerText;
            const el = document.createElement('textarea');
            el.value = str;
            document.body.appendChild(el);
            el.select();
            document.execCommand('copy');
            document.body.removeChild(el);
        }

        function paste(inp, txt) {

            var text = document.getElementById(inp).value;
            var rep = text.replace(/\n \n/gi, '\n');
            rep = rep.replace(/\n\n\n/gi, '\n');
            rep = rep.replace(/\n\n/gi, '\n');
            rep = rep.replace(/\*/gi, 'x');

            if (inp == 'inp1' || inp == 'inp2' || inp == 'inp3' || inp == 'inp4')
                rep = rep.replace(/\n/gi, '');
            else
                rep = rep.replace(/\n/gi, '<br />');
            document.getElementById(txt).innerHTML = rep;
        }

        function updateText() {

            paste('inp1', 'header1')
            paste('inp11', 'text1')

            paste('inp2', 'header2')
            paste('inp22', 'text2')

            paste('inp3', 'header3')
            paste('inp33', 'text3')
        }



        function select(inp) {
            inp.select();
        }

        function add(count) {

            var num = document.getElementById(count).innerHTML;
            if (pluser() < 10)
                document.getElementById(count).innerHTML = parseInt(num, 10) + 1;

            if (pluser() >= 10) {

                document.getElementById("p1").className = "plus";
                document.getElementById("p2").className = "plus";
                document.getElementById("p3").className = "plus";

            }

        }

        function sub(count) {

            document.getElementById("p1").className = "button";
            document.getElementById("p2").className = "button";
            document.getElementById("p3").className = "button";
            var num = document.getElementById(count).innerHTML;
            if (parseInt(num, 10) != 1) document.getElementById(count).innerHTML = parseInt(num, 10) - 1;

        }

        function Clear(inp) {
            document.getElementById(inp).value = "";
        }

        function clearText() {
            Clear('inp1');
            Clear('inp11');

            Clear('inp2');
            Clear('inp22');

            Clear('inp3');
            Clear('inp33');

        }
    </script>




</body></html>
